SELECT * FROM public.mst_vehicle_owner_documents;
SELECT * FROM public.mst_vehicle_owner_entries;

alter table public.mst_vehicle_owner_entries alter createddate set default now();

ALTER SEQUENCE public.mst_vehicle_owner_entries_vehicle_owner_id_seq RESTART;

SELECT last_value FROM public.mst_vehicle_owner_entries_vehicle_owner_id_seq;


SELECT currval('public.mst_vehicle_owner_entries_vehicle_owner_id_seq')

SELECT setval('public.mst_vehicle_owner_entries_vehicle_owner_id_seq', 1);
UPDATE public.mst_vehicle_owner_entries SET vehicle_owner_id = DEFAULT;

SELECT nextval('public.mst_vehicle_owner_type_vehicle_owner_type_id_seq');
SELECT nextval('public.mst_vehicle_owner_entries_vehicle_owner_id_seq');


SELECT to_date("id_valid_from", 'dd-MM-yyyy') as fromDate FROM public.mst_vehicle_owner_entries;


SELECT barrier_name FROM public.mst_barrier WHERE barrier_id = 1

SELECT * FROM public.user_role_mapping

SELECT * FROM public.users
SELECT * FROM public.roles
SELECT * FROM public.user_role_mapping

-- New Tables go Here
-- New Tables Go Here
--Roles
CREATE TABLE roles(
role_id SERIAL PRIMARY KEY NOT NULL,
role_name character varying (15),
role_description character varying (55),
active boolean DEFAULT true NOT NULL,
createddate timestamp without time zone DEFAULT ('now'::text)::date NOT NULL,
lastmodifieddate timestamp without time zone

)

-- Users
CREATE TABLE users(
user_id SERIAL PRIMARY KEY NOT NULL,
username character varying (50),
password character varying (50),
mobile_number INTEGER,
email character varying(100),
gender character varying(1),
active boolean DEFAULT true NOT NULL,
createddate timestamp without time zone DEFAULT ('now'::text)::date NOT NULL,
lastmodifieddate timestamp without time zone

);



-- Role Mapping
CREATE TABLE user_role_mapping(
id SERIAL PRIMARY KEY NOT NULL,
user_id INTEGER NOT NULL,
role_id INTEGER NOT NULL,
active boolean DEFAULT true NOT NULL,
createddate timestamp without time zone DEFAULT ('now'::text)::date NOT NULL,
lastmodifieddate timestamp without time zone
FOREIGN KEY (user_id) REFERENCES users(user_id),
FOREIGN KEY (role_id) REFERENCES roles(role_id)

)



-- emergency/normal
CREATE TABLE mst_category(
     category_id serial PRIMARY KEY NOT NULL,
     category_name character varying(50) NOT NULL,
     active boolean DEFAULT true NOT NULL,
     createddate timestamp without time zone DEFAULT ('now'::text)::date NOT NULL,
     lastmodifieddate timestamp with time zone

);

INSERT INTO mst_category ( category_name, active) VALUES ('Emergency' ,true);
INSERT INTO mst_category ( category_name, active) VALUES ('Normal' ,true);

CREATE TABLE mst_reservationtype(
     reservationtype_id serial PRIMARY KEY NOT NULL,
     reservationtype_name character varying(100) NOT NULL,
     active boolean DEFAULT true NOT NULL,
     createddate timestamp without time zone DEFAULT ('now'::text)::date NOT NULL,
     lastmodifieddate timestamp with time zone

);
INSERT INTO mst_reservationtype ( reservationtype_name, active) VALUES ('Emergency' ,true);
INSERT INTO mst_reservationtype ( reservationtype_name, active) VALUES ('Normal' ,true);


CREATE TABLE mst_relationshipprefix(
     relationshipprifix_id serial PRIMARY KEY NOT NULL,
     relationshipprifix_name character varying(100) NOT NULL,
     active boolean DEFAULT true NOT NULL,
     createddate timestamp without time zone DEFAULT ('now'::text)::date NOT NULL,
     lastmodifieddate timestamp with time zone

);

INSERT INTO mst_relationshipprefix ( relationshipprifix_name, active) VALUES ('S/O' ,true);
INSERT INTO mst_relationshipprefix ( relationshipprifix_name, active) VALUES ('W/O' ,true);
INSERT INTO mst_relationshipprefix ( relationshipprifix_name, active) VALUES ('D/O' ,true);

CREATE TABLE mst_reasonavailing_flight(
     reasonavailing_flight_id serial PRIMARY KEY NOT NULL,
     reasonavailing_flight_name character varying(100) NOT NULL,
     active boolean DEFAULT true NOT NULL,
     createddate timestamp without time zone DEFAULT ('now'::text)::date NOT NULL,
     lastmodifieddate timestamp with time zone

);
INSERT INTO mst_reasonavailing_flight ( reasonavailing_flight_name, active) VALUES ('Emergency' ,true);
INSERT INTO mst_reasonavailing_flight ( reasonavailing_flight_name, active) VALUES ('Examination' ,true);
INSERT INTO mst_reasonavailing_flight ( reasonavailing_flight_name, active) VALUES ('Officail' ,true);
INSERT INTO mst_reasonavailing_flight ( reasonavailing_flight_name, active) VALUES ('Medical' ,true);
INSERT INTO mst_reasonavailing_flight ( reasonavailing_flight_name, active) VALUES ('Other' ,true);


-- Official, Local, etc.
CREATE TABLE mst_typeuser(
     user_type_id serial PRIMARY KEY NOT NULL,
     user_type_name character varying(100) NOT NULL,
     active boolean DEFAULT true NOT NULL,
     createddate timestamp without time zone DEFAULT ('now'::text)::date NOT NULL,
     lastmodifieddate timestamp with time zone

);
INSERT INTO mst_typeuser ( user_type_name, active) VALUES ('Official' ,true);
INSERT INTO mst_typeuser ( user_type_name, active) VALUES ('Patient' ,true);
INSERT INTO mst_typeuser ( user_type_name, active) VALUES ('Local' ,true);
INSERT INTO mst_typeuser ( user_type_name, active) VALUES ('Other' ,true);

CREATE TABLE mst_district (
    district_id serial PRIMARY KEY  NOT NULL,
    district_name character varying(50) NOT NULL,
    active boolean DEFAULT true NOT NULL,
    createddate timestamp without time zone DEFAULT ('now'::text)::date NOT NULL,
    lastmodifieddate timestamp without time zone
);
INSERT INTO mst_district ( district_name, active) VALUES ('Lahaul' ,true);
INSERT INTO mst_district ( district_name, active) VALUES ('Spiti' ,true);




CREATE TABLE mst_helipad (
    helipad_id serial PRIMARY KEY  NOT NULL,
    helipad_name character varying(50) NOT NULL,
    district_id INTEGER NOT NULL,
    active boolean DEFAULT true NOT NULL,
    createddate timestamp without time zone DEFAULT ('now'::text)::date NOT NULL,
    lastmodifieddate timestamp without time zone,
    FOREIGN KEY (district_id) REFERENCES mst_district(district_id)
);
INSERT INTO mst_helipad ( helipad_name,district_id, active) VALUES ('Tindi',1,true);
INSERT INTO mst_helipad ( helipad_name,district_id, active) VALUES ('Tingret',1,true);
INSERT INTO mst_helipad ( helipad_name,district_id, active) VALUES ('Udaipur',1,true);
INSERT INTO mst_helipad ( helipad_name,district_id, active) VALUES ('Barring',1,true);
INSERT INTO mst_helipad ( helipad_name,district_id, active) VALUES ('Rawa',1,true);
INSERT INTO mst_helipad ( helipad_name,district_id, active) VALUES ('Tandi (DIET)',1,true);
INSERT INTO mst_helipad ( helipad_name,district_id, active) VALUES ('Stingri',1,true);
INSERT INTO mst_helipad ( helipad_name,district_id, active) VALUES ('Jispa',1,true);
INSERT INTO mst_helipad ( helipad_name,district_id, active) VALUES ('Gondhla',1,true);
INSERT INTO mst_helipad ( helipad_name,district_id, active) VALUES ('Sissu',1,true);
INSERT INTO mst_helipad ( helipad_name,district_id, active) VALUES ('Chokhang',1,true);

INSERT INTO mst_helipad ( helipad_name,district_id, active) VALUES ('Tabo',2,true);
INSERT INTO mst_helipad ( helipad_name,district_id, active) VALUES ('Sagnam',2,true);
INSERT INTO mst_helipad ( helipad_name,district_id, active) VALUES ('Lossar',2,true);
INSERT INTO mst_helipad ( helipad_name,district_id, active) VALUES ('Kaza',2,true);
INSERT INTO mst_helipad ( helipad_name,district_id, active) VALUES ('Dhanker',2,true);






-- User Form Data
CREATE TABLE userFormData (
    user_id serial PRIMARY KEY  NOT NULL,
    user_type INTEGER NOT NULL,
    registration_type INTEGER NOT NULL,
    full_name character varying(50) NOT NULL,
    relation_prifix INTEGER NOT NULL,
    relation_name character varying(50) NOT NULL,
    mobile_number INTEGER NOT NULL,
    age INTEGER NOT NULL,
    weight INTEGER NOT NULL,
    luggage_weight INTEGER NOT NULL,
    p_address character varying(255) NOT NULL,
    c_address character varying(255) ,
    reason_availing_flight_service INTEGER NOT NULL,
    comments character varying(255) ,
    tentitive_flight_date character varying(10) NOT NULL ,
    availed_flight_befor15 character varying(2) NOT NULL ,
    earlier_flight_service_emergency character varying(2) NOT NULL ,
    decleration_user character varying(2) NOT NULL ,
    flight_district_to_go_from INTEGER NOT NULL,
    flight_helipad_name_to_go_from INTEGER NOT NULL,
    earlierService character varying(2) NOT NULL,
    aadhaar_doc_name character varying(100),
    office_card_coc_name character varying(100),
    medical_doc_name character varying(100),
    other_doc character varying(100),
    application_forwarded_to_role_id INTEGER NOT NULL,
    application_status character varying(2) NOT NULL,
    active boolean DEFAULT true NOT NULL,
    createddate timestamp with time zone DEFAULT ('now'::text)::date ,
    lastmodifieddate timestamp without time zone,
    FOREIGN KEY (user_type) REFERENCES mst_category(category_id),
    FOREIGN KEY (registration_type) REFERENCES mst_typeuser(user_type_id),
    FOREIGN KEY (relation_prifix) REFERENCES mst_relationshipprefix(relationshipprifix_id),
    FOREIGN KEY (reason_availing_flight_service	) REFERENCES mst_reasonavailing_flight(reasonavailing_flight_id),
    FOREIGN KEY (flight_district_to_go_from) REFERENCES mst_district(district_id),
    FOREIGN KEY (flight_helipad_name_to_go_from) REFERENCES mst_helipad(helipad_id),
    FOREIGN KEY (application_forwarded_to_role_id) REFERENCES roles(role_id)
);



-- Vehicle User photo Byte
CREATE TABLE mst_vehicle_owner_documents (
    doc_id serial PRIMARY KEY  NOT NULL,
    vehicle_owner_id INTEGER NOT NULL,
    vehicle_image_owner bytea NOT NULL,
    uploaded_by INTEGER NOT NULL,
    active boolean DEFAULT true NOT NULL,
    createddate timestamp without time zone DEFAULT ('now'::text)::date NOT NULL,
    lastmodifieddate timestamp without time zone,
    FOREIGN KEY (vehicle_owner_id) REFERENCES mst_vehicle_owner_entries(vehicle_owner_id),
    FOREIGN KEY (uploaded_by) REFERENCES users(user_id)
);



